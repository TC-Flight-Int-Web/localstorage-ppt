<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>LocalStorage</title>
    <link type="text/css" href="css/fonts.css" rel="stylesheet" media="all"/>
    <link type="text/css" href="css/style.css" rel="stylesheet" media="all"/>
    <script src="../../js/jquery-1.8.1.min.js"></script>
    <script src="../../js/sylvester/sylvester.min.js"></script>
    <script src="../../js/presenteer.js"></script>
    <script src="js/presentation.js"></script>
    <script src="js/betterexamples.js"></script>
    <script src="js/esprima.js"></script>
    <script>
        $(function () {
            example = new BetterExample(".codeinput", ".codeoutput", {id: "codeexample"});
        });
    </script>
    <style>
        ul li {
            line-height: 50px;
        }
        pre{
            padding: 15px 20px;
            color: #ddd;
            background: #272822;
            font-size: 24px;
            font-family: "Source Code Pro", Consolas, Monaco, Menlo, Consolas, monospace;
        }
    </style>
</head>
<body style="font-family: 'Microsoft YaHei'">
<div class='presentationcontainer'>
    <div class="livecodingarea">
        <div class='input'>
            <div class='triggers'>
                <div class="trigger" onclick='runhtmlandcode();'>
                    &gt; &gt;
                </div>
                <div class="trigger" onclick='runcode();'>
                    &gt;
                </div>
                <div class="trigger" onclick='hideeditor();'>
                    -
                </div>
            </div>
            <label>Code</label>
            <div class='code'>
					<pre class='codeinput'>
$("#button1").on('click', function() {
	alert('jo');
});
					</pre>
                <div class='codeoutput'></div>
            </div>
            <label>HTML</label>
				<textarea class='html'>
<div id='div1'>
    div1
</div>
<button id='button1'>
    button1
</button>
</textarea>
        </div>
        <div class='result'>
            <label>Resultaat</label>
            <div class='html'>

            </div>
        </div>
    </div>
    <div class="triggers" id="triggers">
        <div class="trigger" onclick='maximise();'>
            +
        </div>
        <div class="trigger" onclick='minimise();'>
            -
        </div>
        <div class="trigger" onclick='presentation.show("start"); return false;'
             style="font-size: 14px;font-weight: bold;">
            目录
        </div>
    </div>
    <div class="presentationviewport">
        <div class="presentationcanvas">
            <div id='html5' style='text-align: center;'>
                <img src='images/HTML5_Logo.svg' style='width: 400px; margin-top: 100px;'>
                </img>
                <p class='button pull-right' onclick='presentation.next();'>
                    Start
                </p>
            </div>
            <div data-presenteerid="start" id="start">
                <h1>
                    LocalStorage
                </h1>
                <p>
                    目录
                </p>
                <ul>
                    <li><a href='#' onclick='presentation.show("cookies"); return false;'>Cookies</a></li>
                    <li><a href='#' onclick='presentation.show("localstorage"); return false;'>LocalStorage</a></li>
                    <li><a href='#' onclick='presentation.show("WebSQL"); return false;'>Web SQL</a></li>
                    <li><a href='#' onclick='presentation.show("IndexDB"); return false;'>IndexDB</a></li>
                </ul>
                <p>
                    每一个人都值得最好的东西！
                </p>

            </div>
            <div id="cookies">
                <h1>
                    Cookies
                </h1>
                <ul>
                    <li>Cookies(小甜点)听起来很好吃，但实际上并不是。
                        每次HTTP接受和发送都会传递Cookies数据，它会占用额外的流量。
                    </li>
                    <li>例如，如果你有一个10KB的Cookies数据，发送10次请求，那么，总计就会有100KB的数据在网络上传输。Cookies只能是字符串。
                        浏览器里存储Cookies的空间有限，很多用户禁止浏览器使用Cookies。所以，Cookies只能用来存储小量的非关键的数据。
                    </li>
                </ul>
                <p>
                    <a href='#' onclick='presentation.show("cookiesDemo"); return false;'>cookie用法</a>
                </p>
            </div>
            <div id="cookiesDemo">
                <h1>
                    Jquery cookie操作
                </h1>
                <p>
                    1.创建一个会话cookie
<pre>
$.cookie(‘cookieName’,'cookieValue’);
</pre>
                </p>
                <p>
                    2.创建一个持久cookie
<pre>
$.cookie(‘cookieName’,'cookieValue’，｛expires：7｝);
</pre>
                </p>
                <p>
                    3.创建一个持久并带有效路径的cookie
<pre>
$.cookie(‘cookieName’,'cookieValue’，｛expires：7，path：’/'｝);
</pre>
                </p>
                <p>
                    4.获取cookie
<pre>
$.cookie(‘cookieName’);
</pre>
                </p>
                <p>
                    5.删除cookie
<pre>
$.cookie(‘cookieName’,null);
</pre>
                </p>
            </div>

            <div id="localstorage">
                <h1>
                    localStorage
                </h1>
                <p>
                    localStorage 拥有本地<strong style="color:red;">5兆</strong>的容量可以存储，而cookie却只有<strong style="color:red;">4K</strong>，这是完全不能比的优势。
                </p>
                <br>
                <p>localStorage.setItem(key,value);//保存数据</p>
                <p>localStorage.getItem(key);//读取数据</p>
                <p>localStorage.removeItem(key);//删除单个数据</p>
                <p>localStorage.clear();//删除所有数据</p>
                <p>key：localStorage.key(index);//得到某个索引的值</p>
                <p>
                    github上面有很多兼容store的库。例如：<a target="_blank"
                                               href="https://github.com/jaywcjlove/store.js">store.js</a>
                </p>
            </div>
            <div id="WebSQL">
                <h1>
                    Web SQL
                </h1>
                <p style="line-height: 50px;">
                    WebSQL也是一种在浏览器里存储数据的技术，跟IndexedDB不同的是，
                    IndexedDB更像是一个<strong style="color:red;">NoSQL数据库</strong>，
                    而WebSQL更像是<strong style="color:red;">关系型数据库</strong>，使用SQL查询数据。W3C已经不再支持这种技术。
                    具体情况可以请看：<a target="_blank" href="http://www.w3.org/TR/webdatabase/">http://www.w3.org/TR/webdatabase</a>
                </p>
                <br>
                <p>
                    因为不再支持，所以你就不要在项目中使用这种技术了。
                </p>
            </div>
            <div id="IndexDB">
                <h1>
                    IndexDB
                </h1>
                <p style="line-height: 50px;">
                    IndexedDB里数据以<strong style="color:red;">对象的形式存储</strong>，每个对象都有一个key值索引。IndexedDB里的操作都是事务性的。
                    一种对象存储在一个objectStore里，objectStore就相当于关系数据库里的表。
                    IndexedDB可以有很多objectStore，objectStore里可以有很多对象。每个对象可以用key值获取。
                </p>
                <br>
                <p>
                    <a href='#' onclick='presentation.show("IndexedDBDemo"); return false;'>IndexedDB的用法</a>
                </p>
            </div>
            <div id="IndexedDBDemo">
                <h1>
                    IndexDB用法
                </h1>
                <p style="line-height: 50px;">
                    IndexedDB里数据以<strong style="color:red;">对象的形式存储</strong>，每个对象都有一个key值索引。IndexedDB里的操作都是事务性的。
                    一种对象存储在一个objectStore里，objectStore就相当于关系数据库里的表。
                    IndexedDB可以有很多objectStore，objectStore里可以有很多对象。每个对象可以用key值获取。
                </p>
                <ul>
                    <li><a href='#' onclick='presentation.show("IndexedDBDemoCreate"); return false;'>打开一个IndexedDB数据库</a></li>
                    <li><a href='#' onclick='presentation.show("IndexedDBDemoAdd"); return false;'>往ObjectStore里新增对象</a></li>
                    <li><a href='#' onclick='presentation.show("IndexedDBDemoDelete"); return false;'>从ObjectStore里删除对象</a></li>
                    <li><a href='#' onclick='presentation.show("IndexedDBDemoSearch"); return false;'>通过key取出对象</a></li>
                    <li><a href='#' onclick='presentation.show("IndexedDBDemoUpdate"); return false;'>更新一个对象</a></li>
                </ul>
                <p>
                    <a href='#' onclick='presentation.show("IndexedDBDemo"); return false;'>IndexedDB的用法</a><br/>
                    <a href='https://tc-flight-int-web.github.io/localstorage-demo/' target="_blank">IndexedDB DEMO</a>
                </p>
            </div>
            <div id="IndexedDBDemoCreate">
                <h1>
                    打开一个IndexedDB数据库
                </h1>
                <p style="line-height: 50px;">
                    首先，你需要知道你的浏览器是否支持IndexedDB。请使用最新版的谷歌浏览器或火狐浏览器。低版本的IE是不行的。
                </p>
<pre>
window.indexedDB = window.indexedDB || window.mozIndexedDB
    || window.webkitIndexedDB || window.msIndexedDB;
if(!window.indexedDB)
{
    console.log("你的浏览器不支持IndexedDB");
}
</pre>
                <p style="line-height: 50px;">
                    一旦你的浏览器支持IndexedDB，我们就可以打开它。你不能直接打开IndexedDB数据库。IndexedDB需要你创建一个请求来打开它。
                </p>
<pre>
var request = window.indexedDB.open("testDB", 2);
</pre>
                <p>
                    <a href='#' onclick='presentation.show("IndexedDBDemo"); return false;'>IndexedDB的用法</a>
                </p>
            </div>
            <div id="IndexedDBDemoAdd">
                <h1>
                    往ObjectStore里新增对象
                </h1>
                <p style="line-height: 50px;">
                    为了往数据库里新增数据，我们首先需要创建一个事务，并要求具有读写权限。在indexedDB里任何的存取对象的操作都需要放在事务里执行。
                </p>
<pre>
var transaction = db.transaction(["students"],"readwrite");
transaction.oncomplete = function(event) {
    console.log("Success");
};

transaction.onerror = function(event) {
    console.log("Error");
};
var objectStore = transaction.objectStore("students");

objectStore.add({rollNo: rollNo, name: name});
</pre>
                <p>
                    <a href='#' onclick='presentation.show("IndexedDBDemo"); return false;'>IndexedDB的用法</a>
                </p>
            </div>
            <div id="IndexedDBDemoDelete">
                <h1>
                    从ObjectStore里删除对象
                </h1>
                <p style="line-height: 50px;">
                    删除跟新增一样，需要创建事务，然后调用删除接口，通过key删除对象。<br>
                    语句合并到了一起，变得更简单，但效果是一样的。
                </p>
<pre>
db.transaction(["students"],"readwrite").objectStore("students")
    .delete(rollNo);
</pre>
                <p>
                    <a href='#' onclick='presentation.show("IndexedDBDemo"); return false;'>IndexedDB的用法</a>
                </p>
            </div>
            <div id="IndexedDBDemoSearch">
                <h1>
                    通过key取出对象
                </h1>
                <p style="line-height: 50px;">
                    往get()方法里传入对象的key值，取出相应的对象。
                </p>
<pre>
var request = db.transaction(["students"],"readwrite")
    .objectStore("students").get(rollNo);
request.onsuccess = function(event){
    console.log("Name : "+request.result.name);
};
</pre>
                <p>
                    <a href='#' onclick='presentation.show("IndexedDBDemo"); return false;'>IndexedDB的用法</a>
                </p>
            </div>
            <div id="IndexedDBDemoUpdate">
                <h1>
                    更新一个对象
                </h1>
                <p style="line-height: 50px;">
                    为了更新一个对象，首先要把它取出来，修改，然后再放回去。
                </p>
<pre>
var transaction = db.transaction(["students"],"readwrite");
var objectStore = transaction.objectStore("students");
var request = objectStore.get(rollNo);
request.onsuccess = function(event){
    console.log("Updating : "+request.result.name + " to " + name);
    request.result.name = name;
    objectStore.put(request.result);
};
</pre>
                <p>
                    <a href='#' onclick='presentation.show("IndexedDBDemo"); return false;'>IndexedDB的用法</a>
                </p>
            </div>
        </div>

    </div>
    <div class='bottom'>
        <div class='progressnumber'>

        </div>
        <div class='progressbar'>
            <div class='progressbarindicator'>

            </div>
        </div>
    </div>
</div>
</body>
</html>
